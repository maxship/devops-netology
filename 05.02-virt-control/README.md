# Домашнее задание к занятию "5.2. Системы управления виртуализацией"

## Задача 1 

Выберите подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.

---
Сценарии:

_- 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий._  Если не требуется интеграция windows сервисов, то подойдет KVM, т.к. это opensource решение, на котором можно запустить практически любую ОС. Для полной интеграции со всей windows инфраструктурой можно выбрать Hyper-v.

_- Требуется наиболее производительное бесплатное opensource решение для виртуализации небольшой (20 серверов) инфраструктуры Linux и Windows виртуальных машин._  Для этой задачи подойдет KVM. Это решение с открытым исходным кодом, поддерживает Linux/x86, нетребовательное к ресурсам и достаточно надежное и производительное.

_- Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры._ Для этих условий из opensource систем лучше подойдет KVM, т.к. у него очень хорошая аппаратная совместимость и производительность, в том числе с гостевыми ОС на Windows.

_- Необходимо рабочее окружение для тестирование программного продукта на нескольких дистрибутивах Linux._  Никаких особых требований нет, все ВМ на Linux - подойдет KVM или Xen.





## Задача 2

Опишите сценарий миграции с VMware vSphere на Hyper-V для Linux и Windows виртуальных машин. Детально опишите необходимые шаги для использования всех преимуществ Hyper-V для Windows.

---
Один из вариантов миграции:

1. На сервере с Hyper-v предоставляется общий доступ по протоколам SMB и NFS.
2. На сервере с VMware VSphere общий том NFS добавляется как хранилище, куда виртуальные машины переносятся во включенном состоянии с помощью технологии vMotion.
3. После переноса ВМ выключаются, и их диски конвертируются из формата VMDK в VHD и VHDX путем изменения заголовков файлов. Для этого используются утилиты VHDtool и VHDXtool. Конвертирование происходит мгновенно.
4. Скриптом Powershell в VMM создаются ВМ, аналогичные исходным. Подключаются диски VHDX.
5. Для Windows машин на виртуальные диски в выключенном состоянии устанавливаются компоненты интеграции.
6. Включение ВМ, получение старых IP адресов.


## Задача 3 

Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был бы выбор, то создавали ли вы бы гетерогенную среду или нет? Мотивируйте ваш ответ примерами. 

---

Наличие нескольких систем управления виртуализации сложнее в управлении, поддержке и сопровождении, т.к. у каждой свои инструменты управления и свои особенности. Требуются большие затраты на поддержку чем при использовании одного универсального решения.

Кроме этого наличие разного программного и аппаратного обеспечения может вести к увеличению количества потенциальных точек отказаю

Возможны проблемы с переносом ВМ из одной системы в другую, т.к. разные системы управления виртуализацией могут использовать разные форматы виртуальных жестких дисков. Требуется конвертация дисков из одного формата в другой.

Сложности со взаимной интеграцией разных систем виртуализации. Она либо бывает невозможна, либо требует дополнительных нестандартных решений. 

С учетом этих проблем, кажется, что использование одной среды виртуализации всегда лучше, чем использование нескольких разных. Думаю что в большинстве случаев это так. Но предполагаю, что на практике это не всегда оправдано, особенно с учетом финансовой стороны. Например, если в организации есть ВМ с Windows и Linux, можно для всех гостевых ос использовать Hyper-v. Но Hyper-V это достаточно дорогое решение. Возможно, имеет смысл использовать Hyper-v только для Windows ВМ, а для остальных выбрать решение с открытым исходным кодом, например KVM или Xen.
